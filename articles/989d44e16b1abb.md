---
published: true
type: idea
topics:
  - typescript
  - vim
  - neovim
emoji: ğŸ“
title: nvim-lspã§tsconfig.jsonã¨ã‹ã®è£œå®Œã‚’ã™ã‚‹æ–¹æ³•(JSON schema)
---

## è¿½è¨˜

[SchemaStore.nvim](https://github.com/b0o/schemastore.nvim) ã¨ã„ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒå‡ºã¦ãã¾ã—ãŸã€‚
åŸºæœ¬çš„ã«ã“ã®è¨˜äº‹ã§èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ã‚„ã£ã¦ãã‚Œã¦ã•ã‚‰ã«å®šæœŸçš„ã«æ›´æ–°ã•ã‚Œã‚‹ã®ã§ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã†ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚



neovim ã® built-in lsp ã®è©±ã§ã™ã€‚lspconfig ãŒå…¥ã£ã¦ã‚‹ã®ãŒå‰æã§ã™ã€‚

åŸºæœ¬çš„ã«ã¯`jsonls`ã®è¨­å®šã§

```lua
require("lspconfig")["jsonls"].setup({
    filetypes = {"json", "jsonc"},
    settings = {
        json = {
            schemas = {
                {fileMatch = {"package.json"}, url = "https://json.schemastore.org/package.json"},
                {fileMatch = {"tsconfig*.json"}, url = "https://json.schemastore.org/tsconfig.json"},
            }
        }
    },
})
```

ã¿ãŸã„ãªæ„Ÿã˜ã§ã¤ã‚‰ã¤ã‚‰ã¨ schema ã‚’æ¢ã—ã¦æ›¸ã„ã¦ã„ã‘ã°ã§ãã¾ã™ã€‚
ã—ã‹ã—ã“ã‚Œã‚’ä¸€ã€…æ›¸ãã®ã¯ã¨ã¦ã‚‚é¢å€’è‡­ã„ã§ã™ã€‚ãã“ã§ä¸Šã®ã‚³ãƒ¼ãƒ‰ã® URL ã«ã‚‚ã‚ã‚‹[schemastore](https://www.schemastore.org/json/)ã¨ã„ã†ã‚µã‚¤ãƒˆã‚’ä½¿ã„ã¾ã™ã€‚
ã“ã®ã‚µã‚¤ãƒˆã®

https://www.schemastore.org/api/json/catalog.json

ã«ã¯ã¾ã•ã«ä¸Šã®è¨­å®šé€šã‚Šã® schema ã®ã‚«ã‚¿ãƒ­ã‚°ãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã‚’ä½¿ãˆãŸã‚‰ä¾¿åˆ©ã ã¨æ€ã„ã¾ã›ã‚“ã‹ï¼Ÿ
ãŸã ã€json ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ã¨ã‹ã‚„ã‚‹ã®ã‚‚é¢å€’è‡­ã„ã®ã§`TypescriptToLua`ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã„ã¾ã™ã€‚

https://typescripttolua.github.io

ã“ã“ã® playground ã«å…ˆç¨‹ã®ã‚«ã‚¿ãƒ­ã‚°ã® json ã‚’ Typescript ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦è²¼ã‚Šä»˜ã‘ã‚‹ã¨ã€ãªã‚“ã¨ lua ã®ã‚³ãƒ¼ãƒ‰ã§å‡ºåŠ›ã—ã¦ãã‚Œã¾ã™ã€‚ã‚ã¨ã¯ãã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒšã—ã¦ãã‚‹ã ã‘ã§ã™ã€‚

å¤‰æ›ã—ãŸã‚‚ã®ã‚’ä¸€å¿œ gist ã«ç”¨æ„ã—ã¦ãŠãã¾ã—ãŸã€‚

https://gist.github.com/nazo6/abd12b74d1862e50939049602110c159

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é©å½“ãªã¨ã“ã‚ã«ç½®ã„ã¦

```lua
local catalog_data = require("schema-catalog")
local schemas = catalog_data.schemas

require("lspconfig")["jsonls"].setup({
    filetypes = {"json", "jsonc"},
    settings = {
        json = {
            schemas = schemas
        }
    },
})
```

ã¿ãŸã„ãªæ„Ÿã˜ã«ã™ã‚Œã°ã“ã‚Œã§ã»ã¼å…¨ã¦ã®ãƒŠãƒ³ãƒˆã‚« config ã¿ãŸã„ãª JSON ãƒ•ã‚¡ã‚¤ãƒ«ãŒè£œå®Œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚ã‚ã‚Šã¾ã™ã€‚


> ã“ã®è¨˜äº‹ã¯ [https://note.nazo6.dev/blog/989d44e16b1abb](https://note.nazo6.dev/blog/989d44e16b1abb) ã¨ã®ã‚¯ãƒ­ã‚¹ãƒã‚¹ãƒˆã§ã™ã€‚
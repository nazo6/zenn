---
title: Neovim builtin LSPè¨­å®šå…¥é–€
emoji: ğŸ“„
type: idea
topics: [lsp, neovim, lua]
published: true
---

# ã¯ã˜ã‚ã«

Neovim ã«ã¯çµ„ã¿è¾¼ã¿ã®[LSP](https://microsoft.github.io/language-server-protocol/)ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ã€‚ã¡ã‚‡ã£ã¨å‰ã¾ã§ã¯ VSCode ä¸¦ã®é–‹ç™ºä½“é¨“ã®ãŸã‚ã«ã¯ coc ã‚’ä½¿ã†ã®ãŒãƒ™ã‚¹ãƒˆãªé¸æŠè‚¢ã§ã—ãŸãŒã€neovim builtin lsp(ä»¥ä¸‹ nvim-lsp)ã§ã‚‚ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ãŒæ•´ã£ã¦ãã¦ãŠã‚Šã€ã‹ãªã‚Šã„ã„æ„Ÿã˜ã®æ”¯æ´æ©Ÿèƒ½ãŒå—ã‘ã‚‰ã‚Œã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ãã®è¨­å®šãªã©ã«ã¤ã„ã¦æ›¸ã„ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚

# ç’°å¢ƒ

- Linux (Windows ã ã¨å¾Œè¿°ã® lspinstall ã¨ã„ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒä½¿ãˆãªã„ã®ã§ãŠã™ã™ã‚ã§ãã¾ã›ã‚“ã€‚LSP ã‚’ä½¿ã†ã“ã¨è‡ªä½“ã¯ã§ãã¾ã™ã€‚)
  â€»Windows ã§ä½¿ã„ãŸã„ã²ã¨ã¯ä¸‹ã®[è¿½è¨˜](#è¿½è¨˜)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
- Neovim 0.5
- Vimscript ã¯ä½¿ã‚ãš Lua ã§æ›¸ãã¾ã™

# åŸºæœ¬çš„ãªè¨­å®š

## å¿…é ˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç³»

nvim-lsp ã¯çµ„ã¿è¾¼ã¿ã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ãã®ã¾ã¾ã ã¨æ‰±ã„ã¥ã‚‰ã„ãŸã‚å®Ÿè³ªå¿…é ˆã¨ãªã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚

- nvim-lspconfig (https://github.com/neovim/nvim-lspconfig)
- nvim-lspinstall (https://github.com/kabouzeid/nvim-lspinstall/)

ã¾ãšã€å„è¨€èªç”¨ã®è¨­å®šã‚’æä¾›ã™ã‚‹[nvim-lspconfig](https://github.com/neovim/nvim-lspconfig)ã§ã™ã€‚neovim ã®å…¬å¼ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã¾ãŸã€nvim-lsp ã¯ã‚ãã¾ã§ã€Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€ãªã®ã§å„è¨€èªç”¨ã®ã‚µãƒ¼ãƒãƒ¼ã‚‚å¿…è¦ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã‚’ neovim å†…ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒ nvim-lspinstall ã§ã™ã€‚å‰è¿°ã®é€šã‚Šã€ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ Linux ã®ã¿å¯¾å¿œã§ã™ã€‚ä¸€å¿œ Windows å¯¾å¿œã® PR ã¯å‡ºã¦ã„ã¾ã™ãŒãƒãƒ¼ã‚¸ã•ã‚Œã‚‹ã‹ã¯åˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚

æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã¯è¨­å®šä¾‹ã§ã™ã€‚ã¨ã„ã£ã¦ã‚‚ã»ã¼ README ã‹ã‚‰ã®ã‚³ãƒ”ãƒšã§ã™ã€‚

```lua:lua/init.lua
require('packer').startup(function()
  use 'wbthomason/packer.nvim'
  use 'neovim/nvim-lspconfig'
  use {'kabouzeid/nvim-lspinstall',
    config = function ()
      require 'lsp'
    end
  }
end)
vim.cmd([[autocmd BufWritePost init.lua source <afile> | PackerCompile]])
```

```lua:lsp.lua
-- Use an on_attach function to only map the following keys
-- after the language server attaches to the current buffer
local on_attach = function(client, bufnr)
  local function buf_set_keymap(...) vim.api.nvim_buf_set_keymap(bufnr, ...) end
  local function buf_set_option(...) vim.api.nvim_buf_set_option(bufnr, ...) end
  --Enable completion triggered by <c-x><c-o>
  buf_set_option('omnifunc', 'v:lua.vim.lsp.omnifunc')
  -- Mappings.
  local opts = { noremap=true, silent=true }
  -- See `:help vim.lsp.*` for documentation on any of the below functions
  buf_set_keymap('n', 'gD', '<cmd>lua vim.lsp.buf.declaration()<CR>', opts)
  buf_set_keymap('n', 'gd', '<cmd>lua vim.lsp.buf.definition()<CR>', opts)
  buf_set_keymap('n', 'K', '<cmd>lua vim.lsp.buf.hover()<CR>', opts)
  buf_set_keymap('n', 'gi', '<cmd>lua vim.lsp.buf.implementation()<CR>', opts)
  buf_set_keymap('n', '<C-k>', '<cmd>lua vim.lsp.buf.signature_help()<CR>', opts)
  buf_set_keymap('n', '<space>wa', '<cmd>lua vim.lsp.buf.add_workspace_folder()<CR>', opts)
  buf_set_keymap('n', '<space>wr', '<cmd>lua vim.lsp.buf.remove_workspace_folder()<CR>', opts)
  buf_set_keymap('n', '<space>wl', '<cmd>lua print(vim.inspect(vim.lsp.buf.list_workspace_folders()))<CR>', opts)
  buf_set_keymap('n', '<space>D', '<cmd>lua vim.lsp.buf.type_definition()<CR>', opts)
  buf_set_keymap('n', '<space>rn', '<cmd>lua vim.lsp.buf.rename()<CR>', opts)
  buf_set_keymap('n', '<space>ca', '<cmd>lua vim.lsp.buf.code_action()<CR>', opts)
  buf_set_keymap('n', 'gr', '<cmd>lua vim.lsp.buf.references()<CR>', opts)
  buf_set_keymap('n', '<space>e', '<cmd>lua vim.lsp.diagnostic.show_line_diagnostics()<CR>', opts)
  buf_set_keymap('n', '[d', '<cmd>lua vim.lsp.diagnostic.goto_prev()<CR>', opts)
  buf_set_keymap('n', ']d', '<cmd>lua vim.lsp.diagnostic.goto_next()<CR>', opts)
  buf_set_keymap('n', '<space>q', '<cmd>lua vim.lsp.diagnostic.set_loclist()<CR>', opts)
  buf_set_keymap('n', '<space>f', '<cmd>lua vim.lsp.buf.formatting()<CR>', opts)
end

local function setup_servers()
  require'lspinstall'.setup()
  local servers = require'lspinstall'.installed_servers()
  for _, server in pairs(servers) do
    require'lspconfig'[server].setup{
      on_attach = on_attach,
    }
  end
end

setup_servers()

-- Automatically reload after `:LspInstall <server>` so we don't have to restart neovim
require'lspinstall'.post_install_hook = function ()
  setup_servers() -- reload installed servers
  vim.cmd("bufdo e") -- this triggers the FileType autocmd that starts the server
end
```

ã“ã“ã§ã¯[packer.nvim](wbthomason/packer.nvim)ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚packer ã¯ Lua è£½ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã§ã€config ã«ãã®ã¾ã¾ Lua ã®é–¢æ•°ãŒæ›¸ã‘ãŸã‚Šã¨ Lua ã¨ã®è¦ªå’Œæ€§ãŒã¨ã¦ã‚‚é«˜ã„ã§ã™ã€‚å®Œå…¨ã« neovim ã«ä¹—ã‚Šæ›ãˆã‚‹ã¨ã„ã†äººã«ã¯ãŠã™ã™ã‚ã§ã™ã€‚

ã“ã‚“ãªæ„Ÿã˜ã®è¨­å®šã‚’æ›¸ã neovim ã‚’èµ·å‹•ã—ã¾ã™ã€‚trouble`:LspInstall [server name]`ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
ä¾‹ãˆã°`:LspInstall typescript`ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚ãã†ã™ã‚Œã°

```
Successfully installed language server for typescript
```

ã¨å‡ºã‚‹ã¯ãšã§ã™ã€‚ã“ã‚Œã§`.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ãŸã¨ããªã©ã«ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ä¸Šã®è¨­å®šä¾‹ã§ã¯ä¾‹ãˆã°ãƒãƒ¼ãƒãƒ«ãƒ¢ãƒ¼ãƒ‰ã§`K`ã§ãƒ›ãƒãƒ¼ã‚’å‡ºã—ãŸã‚Šã€`gd`ã§å®šç¾©ã«ç§»å‹•ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
ã¾ãŸã€æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¨ãã®æ—¨ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ ãªã©ã‚’è¨­å®šã—ã¦ã„ãªã„çŠ¶æ…‹ã§ä¸Šã®ã‚ˆã†ã«è¨­å®šã—ã¦`K`ã‚’æŠ¼ã™ã¨ã“ã®ã‚ˆã†ã«æ°—æŒã¡æ‚ªã„è‰²ã®ãƒ›ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/46493524a2b62dcaa6ce741e.png)

:::message
ã¡ãªã¿ã« Typescript ã®ã‚µãƒ¼ãƒãƒ¼ã§ã‚ã‚‹`typescript-language-server`ã¯`node_modules`å†…ã«ã‚ã‚‹`typescript`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å†…éƒ¨ã§åˆ©ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€npm ã§ typescript ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã‹ãªã„ã¨ä½¿ãˆã¾ã›ã‚“ã€‚ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã‘ã°è‡ªå‹•ã§ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚
:::

### è¿½è¨˜

ä»Šãªã‚‰ nvim-lspinstall ã®ä»£ã‚ã‚Šã«[nvim-lsp-installer](https://github.com/williamboman/nvim-lsp-installer)ã‚’ä½¿ã†ã®ãŒã‚ˆã•ãã†ã§ã™ã€‚windows ã«ã‚‚å¯¾å¿œã—ã¦ã„ã¦ã„ã„æ„Ÿã˜ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”»é¢ã‚‚ã‚ã‚Šã¾ã™ã€‚

ã¤ã„ã§ã«å®£ä¼ã§ã™ãŒè‡ªåˆ†ã§ã‚‚[installer.nvim](https://github.com/nazo6/installer.nvim)ã¨ã„ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚LSP ã ã‘ã§ã¯ãªãè‰²ã€…ãªãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã®ãŒã‚¦ãƒªã§ã™ã€‚

## è£œå®Œ

ã•ã¦ã€ã“ã‚Œã§ LSP è‡ªä½“ã¯å‹•ã‹ã›ãŸã‚ã‘ã§ã™ãŒã€å®Ÿã¯ã“ã®ã¾ã¾ã ã¨è£œå®ŒãŒåŠ¹ãã¾ã›ã‚“ã€‚vim ã§ã¯ä»–ã«è£œå®Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚ãã—ã¦è£œå®Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã„ã‚ã„ã‚é¸ã¹ã‚‹ã®ã‚‚ vim ã®ãƒ¡ãƒªãƒƒãƒˆã®ä¸€ã¤ã§ã¯ã‚ã‚Šã¾ã™ãŒã€å®Ÿã¯ LSP ã«å¯¾å¿œã—ãŸè£œå®Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ãªã‚‹ã¨ã»ã¼é¸æŠè‚¢ãŒäºŒæŠã§ã€[nvim-compe](https://github.com/hrsh7th/nvim-compe)ã‹ã€å¾Œç¶™ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚ã‚‹[nvim-cmp](https://github.com/hrsh7th/nvim-cmp)ã§ã™ã€‚

~~ã“ã“ã§ã¯ä¸€å¿œ stable ãª nvim-compe ã‚’ä½¿ã„ã¾ã™ãŒã€nvim-cmp ãŒæ­£å¼ç‰ˆã«ãªã‚Šæ¬¡ç¬¬ nvim-compe ã¯éæ¨å¥¨ã¨ãªã‚‹ã‚ˆã†ãªã®ã§ä»Šã®ã†ã¡ã‹ã‚‰ nvim-cmp ã‚’ä½¿ã†ã®ã‚‚ã‚¢ãƒªã§ã™ã€‚~~
ã¨ã‹æ›¸ã„ãŸæ•°æ—¥å¾Œã« nvim-compe ãŒéæ¨å¥¨ã«ãªã£ã¦ã„ãŸã®ã§ nvim-cmp ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™

#### nvim-compe (deprecated)

```lua:init.lua
-- packerã®startupå†…ã«è¿½åŠ 
use { "hrsh7th/nvim-compe",
  config = function()
    require("compe-settings")
  end
}
```

```lua:lua/compe-settings.lua
vim.o.completeopt = "menuone,noselect"

require'compe'.setup {
  enabled = true;
  autocomplete = true;
  debug = false;
  min_length = 1;
  preselect = 'enable';
  throttle_time = 80;
  source_timeout = 200;
  resolve_timeout = 800;
  incomplete_delay = 400;
  max_abbr_width = 100;
  max_kind_width = 100;
  max_menu_width = 100;
  source = {
    path = true;
    buffer = true;
    calc = true;
    nvim_lsp = true;
    nvim_lua = true;
  };
}

vim.cmd[[
inoremap <silent><expr> <C-Space> compe#complete()
inoremap <silent><expr> <CR>      compe#confirm('<CR>')
inoremap <silent><expr> <C-e>     compe#close('<C-e>')
inoremap <silent><expr> <C-f>     compe#scroll({ 'delta': +4 })
inoremap <silent><expr> <C-d>     compe#scroll({ 'delta': -4 })
]]
```

ç›¸å¤‰ã‚ã‚‰ãšã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ ã‚’é©ç”¨ã—ã¦ã„ãªã„ã®ã§è‰²ãŒã‚­ãƒ¢ã„ã§ã™ãŒã“ã‚Œã§ã“ã‚“ãªæ„Ÿã˜ã«è£œå®ŒãŒå‡ºã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼
![](https://storage.googleapis.com/zenn-user-upload/ce6191841f729ab200a2a14a.png)

### ä»–ã®è£œå®Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³

LSP ã®å¯¾å¿œå…·åˆã¯å‰è¿°ã®é€šã‚Š compe/cmp ãŒæœ€å¼·ã ã¨æ€ã‚ã‚Œã¾ã™ãŒå¯¾å¿œã—ã¦ã„ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ä»–ã«ã‚‚ã‚ã‚‹ã®ã§ç´¹ä»‹ã—ã¾ã™

- ddc.vim

https://github.com/Shougo/ddc.vim

[denops.vim](https://github.com/vim-denops/denops.vim)ã‚’ä½¿ã£ãŸè£œå®Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã€[nvim-lsp ã® source](https://github.com/Shougo/ddc-nvim-lsp)ã‚’å…¥ã‚Œã‚Œã° nvim-lsp ã§ã‚‚ä½¿ãˆã¾ã™ã€‚ã‹ã®æœ‰åãª`deoplete`ã®å¾Œç¶™ã¿ãŸã„ã§ã™

- coq_nvim

https://github.com/ms-jpq/coq_nvim

coc.nvim ã«ä¼¼ã¦ã„ã¾ã™ãŒåˆ¥ç‰©ã§ã™ã€‚æœ€è¿‘ã§ããŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ Python ã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚ã€Œã‚¯ã‚½é€Ÿã„ã€è£œå®Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚‰ã—ã„ã§ã™ã€‚ãƒ‘ãƒƒã¨è¦‹ã‹ãªã‚Šé«˜æ©Ÿèƒ½ãã†ãªæ„Ÿã˜ãŒã—ã¾ã™ã€‚

- completion-nvim

https://github.com/nvim-lua/completion-nvim

ä½¿ã£ãŸã“ã¨ã¯ãªã„ã®ã§ã™ãŒ Reddit ã§ã¯éå¸¸ã«è©•åˆ¤ãŒã‚ˆã‚ã—ããªã„ã§ã™ã€‚ã“ã‚Œã‚’ä½¿ã£ã¦ã‚‹è¨˜äº‹ã¯å¤ã„ã‚‚ã®ã ã¨ã„ã†åˆ¤æ–­ææ–™ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

neovim ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã‚’å‹•ã‹ã™æ–¹æ³•ã¯ã„ã‚ã„ã‚ã‚ã‚Šã¾ã™ãŒã€ã“ã“ã§ã¯[null-ls](https://github.com/jose-elias-alvarez/null-ls.nvim)ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
ã“ã‚Œã¯æ§˜ã€…ãªãƒ„ãƒ¼ãƒ«ã®å‡ºåŠ›ã‚’ LSP ã§èª­ã¿è¾¼ã‚ã‚‹å½¢å¼ã«å¤‰æ›ã—ã¦ neovim ã«é€ã‚‹ã¨ã„ã†ä»•çµ„ã¿ã«ãªã£ã¦ã„ã¾ã™ã€‚ä¼¼ãŸã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã«[diagnostic-languageserver](https://github.com/iamcco/diagnostic-languageserver)ã‚„[efm-langserver](https://github.com/mattn/efm-langserver)ãŒã‚ã‚Šã¾ã™ãŒã€`null-ls`ã¯ã‚ãã¾ã§ neovim ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«éããªã„ã®ã§å¤–éƒ¨ä¾å­˜ãŒãªã„ã“ã¨ãŒåˆ©ç‚¹ã§ã™ã€‚ã¾ãŸæ§˜ã€…ãªãƒªãƒ³ã‚¿ãƒ¼ï¼ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ç”¨ã«ã‚ã‚‰ã‹ã˜ã‚è¨­å®šãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ç°¡å˜ã«è¨­å®šã§ãã¾ã™ã€‚

ã“ã‚Œã¯ Prettier ã®è¨­å®šä¾‹ã§ã™ã€‚ã‚ã‚‰ã‹ã˜ã‚ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«`prettier`ã‚’ npm ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```lua:init.lua
-- "lsp.lua"ãŒèª­ã¿ã“ã¾ã‚Œã‚‹ã‚ˆã‚Šå‰ã®ä½ç½®ã«è¿½åŠ 
use { "jose-elias-alvarez/null-ls.nvim", requires = { "nvim-lua/plenary.nvim" } }
```

```lua:lua/lsp.lua
-- è¿½è¨˜
local nullls = require "null-ls"
nullls.config {
  sources = {
    nullls.builtins.formatting.prettier,
  },
}
require("lspconfig")["null-ls"].setup {}
```

ã‚µãƒ¼ãƒãƒ¼ã«ã‚ˆã£ã¦ã¯ãã‚Œè‡ªä½“ãŒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ©Ÿèƒ½ã‚’æŒã£ã¦ã„ã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã‚’ç„¡åŠ¹åŒ–ã™ã‚‹ã«ã¯`lsp.lua`å†…ã®`on_attach`ã«

```lua
client.resolved_capabilities.document_formatting = false
```

ã‚’è¿½åŠ ã—ã¾ã™ã€‚

https://github.com/jose-elias-alvarez/null-ls.nvim/blob/main/doc/BUILTINS.md

# ã„ã‚ã„ã‚ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³é”

ã“ã“ã¾ã§ã§åŸºæœ¬çš„ã«ã¯å®Œäº†ã§ã™ãŒã€ã“ã“ã‹ã‚‰ã¯ nvim-lsp ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ãˆã‚‹ä¾¿åˆ©ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å‚™å¿˜éŒ²ã‚’å…¼ã­ã¦æ›¸ã„ã¦ã„ãã¾ã™ã€‚

## æ‹¡å¼µç³»

- lspsaga.nvim

https://github.com/glepnir/lspsaga.nvim
ãªã‚“ã‹ã„ã‚ã„ã‚ãƒªãƒƒãƒãªè¡¨ç¤ºã«ãªã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³

- lsp_signature.nvim

https://github.com/ray-x/lsp_signature.nvim

VSCode ã§ã§ãã‚‹ã€é–¢æ•°ã‚’å¼•æ•°ã‚’å…¥åŠ›ã—ã¦ã„ã‚‹ã¨ãã«è¡¨ç¤ºã—ã¦ãã‚Œã‚‹ã‚„ã¤ã§ã™ã€‚

- lspkind-nvim

https://github.com/onsails/lspkind-nvim

è£œå®Œã«ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¿½åŠ ã—ã¦ãã‚Œã‚‹ã‚„ã¤

- trouble.nvim

https://github.com/folke/trouble.nvim

VSCode ã®ä¸‹éƒ¨ã«å‡ºã‚‹ã‚¨ãƒ©ãƒ¼ä¸€è¦§ã¿ãŸã„ãªã‚„ã¤ã§ã™ã€‚è¶…ä¾¿åˆ©ã€‚

## ç‰¹å®šã®è¨€èªç³»

nvim-lsp ã‚’åˆ©ç”¨ã—ãŸç‰¹å®šã®è¨€èªã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å‘ã‘ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚‚é–‹ç™ºã•ã‚Œå§‹ã‚ã¦ã„ã¾ã™ã€‚

- flutter-tools.nvim

https://github.com/akinsho/flutter-tools.nvim

neovim ã§ flutter ã‚’ä½¿ã†ãªã‚‰å‰ã¯ coc ä¸€æŠã ã£ãŸã¨æ€ã„ã¾ã™ãŒã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚ã‚Œã° coc ã˜ã‚ƒãªãã¦ã‚‚ã„ã„ã‹ãªã¨æ€ãˆã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

- nvim-lsp-ts-utils

https://github.com/jose-elias-alvarez/nvim-lsp-ts-utils

ã¾ã ä½¿ã£ã¦ãªã„ã§ã™ãŒçµæ§‹ä¾¿åˆ©ãã†ã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã® Prettier ã¨ã‹ ESLint ã‚’ä½¿ã†ã¨ã‹ã§ãã‚‹ã¿ãŸã„ã§ã™ã€‚

- rust-tools.nvim

https://github.com/simrat39/rust-tools.nvim

Rust ã§ã™

- go.nvim

https://github.com/ray-x/go.nvim

Go ã§ã™

- nvim-jdtls

https://github.com/mfussenegger/nvim-jdtls

Java ã§ã™

# å‚è€ƒã«ãªã‚‹ã‚µã‚¤ãƒˆ

- å…¬å¼ã® LSP ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

https://neovim.io/doc/user/lsp.html

ã¨ã‚Šã‚ãˆãšè¿·ã£ãŸã‚‰ã“ã“ã‚’è¦‹ã¾ã—ã‚‡ã†

- r/neovim

https://www.reddit.com/r/neovim/

æµ·å¤–ã®å·¨å¤§æ²ç¤ºæ¿ Reddit ã® neovim æ¿ã§ã™ã€‚åŸºæœ¬çš„ã«æ–°ã—ã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã“ã“ã§å®£ä¼ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»–ã«ã‚‚ã„ã‚ã„ã‚ãª neovim ã®æœ€æ–°æƒ…å ±ã‚’çŸ¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

# æœ€å¾Œã«

ä¸€å¿œè¨­å®šã‚’ã¾ã¨ã‚ãŸ gist ã‚’ä½œã£ã¦ãŠãã¾ã—ãŸã€‚`packer.nvim`ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚Œã°ã“ã‚Œã ã‘ã§ä¸€å¿œä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚å¤šåˆ†ã€‚
https://gist.github.com/nazo6/f1d013e52250e21e56e08d19c757409d

ã¤ã„ã§ã«è‡ªåˆ†ã® neovim ã®è¨­å®šã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ç½®ã„ã¦ãŠãã¾ã™ã€‚ã‚ˆã‘ã‚Œã°å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚
https://github.com/nazo6/nvim

ãã‚Œã§ã¯ã‚ˆã„ neovim ãƒ©ã‚¤ãƒ•ã‚’ã€‚

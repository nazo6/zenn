---
title: Neovim builtin LSPè¨­å®šå…¥é–€
emoji: ğŸ“„
type: idea
topics: [lsp, neovim, lua]
published: true
---

# ã¯ã˜ã‚ã«

Neovim ã«ã¯çµ„ã¿è¾¼ã¿ã®[LSP](https://microsoft.github.io/language-server-protocol/)ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ã€‚ã¡ã‚‡ã£ã¨å‰ã¾ã§ã¯ VSCode ä¸¦ã®é–‹ç™ºä½“é¨“ã®ãŸã‚ã«ã¯ coc ã‚’ä½¿ã†ã®ãŒãƒ™ã‚¹ãƒˆãªé¸æŠè‚¢ã§ã—ãŸãŒã€neovim builtin lsp(ä»¥ä¸‹ nvim-lsp)ã§ã‚‚ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ãŒæ•´ã£ã¦ãã¦ãŠã‚Šã€ã‹ãªã‚Šã„ã„æ„Ÿã˜ã®æ”¯æ´æ©Ÿèƒ½ãŒå—ã‘ã‚‰ã‚Œã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ãã®è¨­å®šãªã©ã«ã¤ã„ã¦æ›¸ã„ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚

# ç’°å¢ƒ

- Neovim 0.5
- Vimscript ã¯ä½¿ã‚ãš Lua ã§æ›¸ãã¾ã™

# åŸºæœ¬çš„ãªè¨­å®š

## å¿…é ˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç³»

nvim-lsp ã¯çµ„ã¿è¾¼ã¿ã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ãã®ã¾ã¾ã ã¨æ‰±ã„ã¥ã‚‰ã„ãŸã‚å®Ÿè³ªå¿…é ˆã¨ãªã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚

- nvim-lspconfig (https://github.com/neovim/nvim-lspconfig)
- nvim-lsp-installer (https://github.com/williamboman/nvim-lsp-installer)

ã¾ãšã€å„è¨€èªç”¨ã®è¨­å®šã‚’æä¾›ã™ã‚‹[nvim-lspconfig](https://github.com/neovim/nvim-lspconfig)ã§ã™ã€‚neovim ã®å…¬å¼ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã¾ãŸã€nvim-lsp ã¯ã‚ãã¾ã§ã€Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€ãªã®ã§å„è¨€èªç”¨ã®ã‚µãƒ¼ãƒãƒ¼ã‚‚å¿…è¦ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã‚’ neovim å†…ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒ nvim-lsp-installer ã§ã™ã€‚ã¡ãªã¿ã«ã€nvim-lsp ã«ã¤ã„ã¦èª¿ã¹ã¦ã„ã‚‹ã¨ã‚ˆã nvim-lspinstall ã¨ã„ã†ã‚‚ã®ãŒã§ã¦ãã‚‹ã¨æ€ã„ã¾ã™ãŒã€ãã‚Œã¯æœ€è¿‘éæ¨å¥¨ã«ãªã‚Šã¾ã—ãŸã€‚

æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã¯è¨­å®šä¾‹ã§ã™ã€‚ã¨ã„ã£ã¦ã‚‚ã»ã¼ README ã‹ã‚‰ã®ã‚³ãƒ”ãƒšã§ã™ã€‚

```lua :lua/init.lua
local install_path = vim.fn.stdpath("data").."/site/pack/packer/start/packer.nvim"
if vim.fn.empty(vim.fn.glob(install_path)) > 0 then
  packer_bootstrap = vim.fn.system({"git", "clone", "--depth", "1", "https://github.com/wbthomason/packer.nvim", install_path})
end

require("packer").startup(function(use)
  use "wbthomason/packer.nvim"
  use "neovim/nvim-lspconfig"
  use "williamboman/nvim-lsp-installer"

  if packer_bootstrap then
    require("packer").sync()
  end
end)
vim.cmd([[autocmd BufWritePost init.lua source <afile> | PackerCompile]])

local on_attach = function(client, bufnr)
  local function buf_set_keymap(...) vim.api.nvim_buf_set_keymap(bufnr, ...) end

  local opts = { noremap=true, silent=true }
  buf_set_keymap("n", "gD", "<cmd>lua vim.lsp.buf.declaration()<CR>", opts)
  buf_set_keymap("n", "gd", "<cmd>lua vim.lsp.buf.definition()<CR>", opts)
  buf_set_keymap("n", "K", "<cmd>lua vim.lsp.buf.hover()<CR>", opts)
  buf_set_keymap("n", "gi", "<cmd>lua vim.lsp.buf.implementation()<CR>", opts)
  buf_set_keymap("n", "<C-k>", "<cmd>lua vim.lsp.buf.signature_help()<CR>", opts)
  buf_set_keymap("n", "<space>wa", "<cmd>lua vim.lsp.buf.add_workspace_folder()<CR>", opts)
  buf_set_keymap("n", "<space>wr", "<cmd>lua vim.lsp.buf.remove_workspace_folder()<CR>", opts)
  buf_set_keymap("n", "<space>wl", "<cmd>lua print(vim.inspect(vim.lsp.buf.list_workspace_folders()))<CR>", opts)
  buf_set_keymap("n", "<space>D", "<cmd>lua vim.lsp.buf.type_definition()<CR>", opts)
  buf_set_keymap("n", "<space>rn", "<cmd>lua vim.lsp.buf.rename()<CR>", opts)
  buf_set_keymap("n", "<space>ca", "<cmd>lua vim.lsp.buf.code_action()<CR>", opts)
  buf_set_keymap("n", "gr", "<cmd>lua vim.lsp.buf.references()<CR>", opts)
  buf_set_keymap("n", "<space>e", "<cmd>lua vim.lsp.diagnostic.show_line_diagnostics()<CR>", opts)
  buf_set_keymap("n", "[d", "<cmd>lua vim.lsp.diagnostic.goto_prev()<CR>", opts)
  buf_set_keymap("n", "]d", "<cmd>lua vim.lsp.diagnostic.goto_next()<CR>", opts)
  buf_set_keymap("n", "<space>q", "<cmd>lua vim.lsp.diagnostic.set_loclist()<CR>", opts)
  buf_set_keymap("n", "<space>f", "<cmd>lua vim.lsp.buf.formatting()<CR>", opts)
end

local lsp_installer = require("nvim-lsp-installer")
lsp_installer.on_server_ready(function(server)
    local opts = {}
    opts.on_attach = on_attach

    server:setup(opts)
end)
```

ã“ã“ã§ã¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ã¨ã—ã¦[packer.nvim](wbthomason/packer.nvim)ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚packer ã¯ Lua è£½ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã§ã€config ã«ãã®ã¾ã¾ Lua ã®é–¢æ•°ãŒæ›¸ã‘ãŸã‚Šã¨ Lua ã¨ã®è¦ªå’Œæ€§ãŒã¨ã¦ã‚‚é«˜ã„ã§ã™ã€‚å®Œå…¨ã« neovim ã«ä¹—ã‚Šæ›ãˆã‚‹ã¨ã„ã†äººã«ã¯ãŠã™ã™ã‚ã§ã™ã€‚

ã“ã‚“ãªæ„Ÿã˜ã®è¨­å®šã‚’æ›¸ã neovim ã‚’èµ·å‹•ã™ã‚‹ã¨ã€`:LspInstall [server name]`ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚`server name`ã¯ã€nvim-lspconfig ã® CONFIG.md ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨åŒç­‰ã§ã™ã€‚
ä¾‹ãˆã°`:LspInstall tsserver`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€typescript ã® Language Server ã§ã‚ã‚‹`typescript-language-server`ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚
ã™ã‚‹ã¨ã€`.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ãŸã¨ããªã©ã«ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ä¸Šã®è¨­å®šä¾‹ã§ã¯ä¾‹ãˆã°ãƒãƒ¼ãƒãƒ«ãƒ¢ãƒ¼ãƒ‰ã§`K`ã§ãƒ›ãƒãƒ¼ã‚’å‡ºã—ãŸã‚Šã€`gd`ã§å®šç¾©ã«ç§»å‹•ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã•ã‚‰ã«ã€`:LspInstallInfo`ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã“ã¨ã§ä¸‹å›³ã®ã‚ˆã†ã«ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚µãƒ¼ãƒãƒ¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”»é¢ãŒã§ã¾ã™ã€‚
![](/images/neovim-lsp/nvim-lsp-installer.png)

ã“ã®è¨­å®šä¾‹ã§ã¯`K`ã‚’æŠ¼ã™ã¨ã“ã®ã‚ˆã†ã«ãƒ›ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
ã¾ãŸã€æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¨ãã®æ—¨ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
![](/images/neovim-lsp/hover.png)

:::message
ã¡ãªã¿ã«`typescript-language-server`ã¯`typescript`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®`tsserver`ã‚’å†…éƒ¨ã§åˆ©ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€npm ã§ typescript ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã‹ãªã„ã¨ä½¿ãˆã¾ã›ã‚“ã€‚ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã‘ã°è‡ªå‹•ã§ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã•ã‚Œã‚‹ã¿ãŸã„ã§ã™ã€‚
:::

## è£œå®Œ

ã•ã¦ã€ã“ã‚Œã§ LSP è‡ªä½“ã¯å‹•ã‹ã›ãŸã‚ã‘ã§ã™ãŒã€å®Ÿã¯ã“ã®ã¾ã¾ã ã¨è£œå®ŒãŒåŠ¹ãã¾ã›ã‚“ã€‚vim ã§ã¯ä»–ã«è£œå®Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚ãã—ã¦è£œå®Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã„ã‚ã„ã‚é¸ã¹ã‚‹ã®ã‚‚ vim ã®ãƒ¡ãƒªãƒƒãƒˆã®ä¸€ã¤ã§ã¯ã‚ã‚Šã¾ã™ãŒã€LSP ã¸ã®å¯¾å¿œåº¦ãŒé«˜ã„[nvim-cmp](https://github.com/hrsh7th/nvim-cmp)ãŒãŠã™ã™ã‚ã§ã™ã€‚

`nvim-cmp`ã§ã¯ã‚³ã‚¢ã¨ lsp ç”¨ã®è£œå®Œã‚½ãƒ¼ã‚¹ãŒåˆ†é›¢ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ä¸¡æ–¹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚nvim-lsp ä»¥å¤–ã«ã‚‚æ§˜ã€…ãªè£œå®Œã‚½ãƒ¼ã‚¹ãŒé–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ãƒãƒƒãƒ•ã‚¡ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è£œå®Œã—ã¦ãã‚Œã‚‹`cmp-buffer`ã‚’å…¥ã‚Œã¦ã„ã¾ã™ã€‚
ã¾ãŸã€ã“ã“ã§ã¯å°å…¥ã—ã¦ã„ã¾ã›ã‚“ãŒã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒãƒƒãƒ•ã‚¡ã®è£œå®Œã‚’ã—ã¦ãã‚Œã‚‹[cmp-cmdline](https://github.com/hrsh7th/cmp-cmdline)ãŒéå¸¸ã«ä¾¿åˆ©ãªã®ã§ãŠã™ã™ã‚ã§ã™ã€‚

ã¾ãŸã€ã‚¹ãƒ‹ãƒšãƒƒãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦ã€[vim-vsnip](github.com/hrsh7th/vim-vsnip)ã‚’ä½¿ã„ã¾ã™ã€‚ã‚¹ãƒ‹ãƒšãƒƒãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯å®Ÿè³ªçš„ã«å¿…é ˆãªã®ã§ä½•ã‹å…¥ã‚Œã¦ãŠãã¾ã—ã‚‡ã†ã€‚

```lua :init.lua
-- packerã®startupå†…ã«è¿½åŠ 
use "hrsh7th/nvim-cmp"
use "hrsh7th/cmp-nvim-lsp"
use "hrsh7th/cmp-vsnip"
use "hrsh7th/cmp-buffer"

use "hrsh7th/vim-vsnip"

-- lsp_installer.on_server_readyã«è¿½åŠ 
opts.capabilities = require("cmp_nvim_lsp").update_capabilities(vim.lsp.protocol.make_client_capabilities())

-- æœ€å¾Œã«è¿½åŠ 
vim.opt.completeopt = "menu,menuone,noselect"

local cmp = require"cmp"
cmp.setup({
  snippet = {
    expand = function(args)
      vim.fn["vsnip#anonymous"](args.body)
    end,
  },
  mapping = {
    ["<C-d>"] = cmp.mapping.scroll_docs(-4),
    ["<C-f>"] = cmp.mapping.scroll_docs(4),
    ["<C-Space>"] = cmp.mapping.complete(),
    ["<C-e>"] = cmp.mapping.close(),
    ["<CR>"] = cmp.mapping.confirm({ select = true }),
  },
  sources = cmp.config.sources({
    { name = "nvim_lsp" },
    { name = "vsnip" },
  }, {
    { name = "buffer" },
  })
})
```

ã“ã‚Œã§ã“ã‚“ãªæ„Ÿã˜ã«è£œå®ŒãŒå‡ºã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
![](/images/neovim-lsp/cmp.png)

### ä»–ã®è£œå®Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³

LSP ã®å¯¾å¿œå…·åˆã¯ nvim-cmp ãŒæœ€å¼·ã ã¨æ€ã‚ã‚Œã¾ã™ãŒå¯¾å¿œã—ã¦ã„ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ä»–ã«ã‚‚ã‚ã‚‹ã®ã§ç´¹ä»‹ã—ã¾ã™

- ddc.vim

https://github.com/Shougo/ddc.vim

[denops.vim](https://github.com/vim-denops/denops.vim)ã‚’ä½¿ã£ãŸè£œå®Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã€[nvim-lsp ã® source](https://github.com/Shougo/ddc-nvim-lsp)ã‚’å…¥ã‚Œã‚Œã° nvim-lsp ã§ã‚‚ä½¿ãˆã¾ã™ã€‚ã‹ã®æœ‰åãª`deoplete`ã®å¾Œç¶™ã¿ãŸã„ã§ã™

- coq_nvim

https://github.com/ms-jpq/coq_nvim

coc.nvim ã«ä¼¼ã¦ã„ã¾ã™ãŒåˆ¥ç‰©ã§ã™ã€‚Python è£½ã§ã™ãŒ neovim å°‚ç”¨ã§ã™ã€‚

# ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿/ãƒªãƒ³ã‚¿

ã¤ã„ã§ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿/ãƒªãƒ³ã‚¿ã®è¨­å®šã‚‚ã—ã¦ã—ã¾ã„ã¾ã™ã€‚
neovim ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã‚’å‹•ã‹ã™æ–¹æ³•ã¯ã„ã‚ã„ã‚ã‚ã‚Šã¾ã™ãŒã€ã“ã“ã§ã¯[null-ls](https://github.com/jose-elias-alvarez/null-ls.nvim)ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
ã“ã‚Œã¯æ§˜ã€…ãªãƒ„ãƒ¼ãƒ«ã®å‡ºåŠ›ã‚’ LSP ã®å½¢å¼ã«å¤‰æ›ã—ã¦ nvim-lsp ã«é€ã‚‹ã¨ã„ã†ä»•çµ„ã¿ã«ãªã£ã¦ã„ã¾ã™ã€‚ä¼¼ãŸã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã«[diagnostic-languageserver](https://github.com/iamcco/diagnostic-languageserver)ã‚„[efm-langserver](https://github.com/mattn/efm-langserver)ãŒã‚ã‚Šã¾ã™ãŒã€`null-ls`ã¯ã‚ãã¾ã§ neovim ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãªã®ã§å¤–éƒ¨ä¾å­˜ãŒãªã„ã“ã¨ãŒåˆ©ç‚¹ã§ã™ã€‚
ã¾ãŸæ§˜ã€…ãªãƒªãƒ³ã‚¿ãƒ¼ï¼ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ç”¨ã«ã‚ã‚‰ã‹ã˜ã‚è¨­å®šãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ç°¡å˜ã«è¨­å®šã§ãã¾ã™ã€‚
è©³ã—ãã¯[null-ls ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/jose-elias-alvarez/null-ls.nvim/blob/main/doc/BUILTINS.md)ã‚’è¦‹ã¦ãã ã•ã„ã€‚

ã“ã‚Œã¯ Prettier ã®è¨­å®šä¾‹ã§ã™ã€‚ã‚ã‚‰ã‹ã˜ã‚ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«`prettier`ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```lua :init.lua
use { "jose-elias-alvarez/null-ls.nvim", requires = { "nvim-lua/plenary.nvim" } }

local nullls = require "null-ls"
nullls.setup {
  sources = {
    nullls.builtins.formatting.prettier,
  },
}
```

ã‚µãƒ¼ãƒãƒ¼ã«ã‚ˆã£ã¦ã¯ãã‚Œè‡ªä½“ãŒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ©Ÿèƒ½ã‚’æŒã£ã¦ã„ã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã‚’ç„¡åŠ¹åŒ–ã™ã‚‹ã«ã¯`on_attach`ã«

```lua
client.resolved_capabilities.document_formatting = false
```

ã‚’è¿½åŠ ã—ã¾ã™ã€‚

:::message
`prettier`ã¨åŒæ§˜ã«ã€`eslint`ã‚‚null-lsã§ä½¿ç”¨ã§ãã¾ã™ãŒã€ã™ã”ãé‡ã„ã®ã§ã€LSPç‰ˆã‚’ä½¿ã†ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚nvim-lsp-installerã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚
:::


# nvim-lsp ã®(ã¾ã )ãƒ€ãƒ¡ãªã¨ã“ã‚

ã“ã‚Œã‹ã‚‰æ”¹å–„ã•ã‚Œã‚‹ã¨æ€ã†ã®ã§ã€Œã¾ã ã€ã§ã™ãŒã€æˆç†Ÿã—ãã£ã¦ã„ãªã„ãŸã‚ä¸æº€ç‚¹ã‚‚ã‚ã‚Šã¾ã™ã€‚

- è¨­å®šãŒé¢å€’ãã•ã„
  ã“ã®è¨˜äº‹ã§ã¯ç°¡å˜ãªã“ã¨ã—ã‹æ›¸ã„ã¦ã„ã¾ã›ã‚“ãŒã€ä¾‹ãˆã°`tsserver`ã¨`denols`ã®å‡ºã—åˆ†ã‘ã®ã‚ˆã†ã«è¤‡é›‘ãªã“ã¨ã‚’ã—ã‚ˆã†ã¨ã™ã‚‹ã¨é€”ç«¯ã«é›£ã—ããªã‚Šã¾ã™ã€‚
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚ˆãå£Šã‚Œã‚‹
  ä»•æ§˜ãŒã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã«å¤‰æ›´ã•ã‚Œã‚‹ãŸã‚ã€ã‚ˆãå£Šã‚Œã¾ã™ã€‚å®Ÿéš›æœ€è¿‘ã® neovim 0.5.1 ã§ LSP é–¢é€£ã® breaking change ãŒå…¥ã£ãŸãŸã‚ã€ã—ã°ã‚‰ãæ›´æ–°ã•ã‚Œã¦ã„ãªã„ LSP é–¢é€£ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯å‹•ã‹ãªã„å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚
  ã¾ãŸã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½œè€…ãŒ nightly ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã€é€†ã«å®‰å®šæ¿ã ã¨ã†ã¾ãå‹•ã‹ãªã„ã¨ã„ã†ã“ã¨ã‚‚ç¨€ã«ã‚ã‚Šã¾ã™ã€‚

# ã„ã‚ã„ã‚ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³é”

ã“ã“ã¾ã§ã§åŸºæœ¬çš„ãªè¨­å®šã¯å®Œäº†ã§ã™ãŒã€LSP ã¨é€£æºã—ã¦é–‹ç™ºã‚’ã‚ˆã‚Šä¾¿åˆ©ã«ã—ã¦ãã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

## LSP æ‹¡å¼µç³»

- lspsaga.nvim

  ~~https://github.com/glepnir/lspsaga.nvim~~

  â†‘ ã—ã°ã‚‰ããƒ¡ãƒ³ãƒ†ã•ã‚Œã¦ãªã„ã¿ãŸã„ãªã®ã§ãƒ•ã‚©ãƒ¼ã‚¯ç‰ˆã‚’ç´¹ä»‹ã—ã¾ã™

  https://github.com/tami5/lspsaga.nvim

  ãªã‚“ã‹ã„ã‚ã„ã‚ãƒªãƒƒãƒãªè¡¨ç¤ºã«ãªã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³

- lsp_signature.nvim

  https://github.com/ray-x/lsp_signature.nvim

  é–¢æ•°ã®å¼•æ•°ã‚’å…¥åŠ›ã—ã¦ã„ã‚‹ã¨ãã«ã‚·ã‚°ãƒãƒãƒ£ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã—ã¦ãã‚Œã¾ã™ã€‚

- lspkind-nvim

  https://github.com/onsails/lspkind-nvim

  è£œå®Œã«ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¿½åŠ ã—ã¦ãã‚Œã‚‹ã‚„ã¤

- trouble.nvim

  https://github.com/folke/trouble.nvim

  VSCode ã®ä¸‹éƒ¨ã«å‡ºã‚‹ã‚¨ãƒ©ãƒ¼ä¸€è¦§ã¿ãŸã„ãªã‚„ã¤ã§ã™ã€‚è¶…ä¾¿åˆ©ã€‚

## ç‰¹å®šã®è¨€èªç³»

nvim-lsp ã‚’åˆ©ç”¨ã—ãŸç‰¹å®šã®è¨€èªã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å‘ã‘ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚‚é–‹ç™ºã•ã‚Œå§‹ã‚ã¦ã„ã¾ã™ã€‚

- flutter-tools.nvim

  https://github.com/akinsho/flutter-tools.nvim

  neovim ã§ flutter ã‚’ä½¿ã†ãªã‚‰å‰ã¯ coc ä¸€æŠã ã£ãŸã¨æ€ã„ã¾ã™ãŒã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚ã‚Œã° coc ã˜ã‚ƒãªãã¦ã‚‚ã„ã„ã‹ãªã¨æ€ãˆã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

- nvim-lsp-ts-utils

  https://github.com/jose-elias-alvarez/nvim-lsp-ts-utils

  ãƒ­ãƒ¼ã‚«ãƒ«ã® Prettier ã¨ã‹ ESLint ã‚’ä½¿ã†ã¨ã‹ã§ãã¾ã™ã€‚

- rust-tools.nvim

  https://github.com/simrat39/rust-tools.nvim

  Rust ã§ã™

- go.nvim

  https://github.com/ray-x/go.nvim

  Go ã§ã™

- nvim-jdtls

  https://github.com/mfussenegger/nvim-jdtls

  Java ã§ã™

# å‚è€ƒã«ãªã‚‹ã‚µã‚¤ãƒˆ

- å…¬å¼ã® LSP ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

  https://neovim.io/doc/user/lsp.html

  å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã®ã¯å¤§äº‹ã€‚ã‚‚ã¡ã‚ã‚“`:h lsp`ã§ neovim å†…ã‹ã‚‰è¦‹ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

- r/neovim

  https://www.reddit.com/r/neovim/

  æµ·å¤–ã®å·¨å¤§æ²ç¤ºæ¿ Reddit ã® neovim æ¿ã§ã™ã€‚æ–°ã—ã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã‚ˆãã“ã“ã§å®£ä¼ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»–ã«ã‚‚ã„ã‚ã„ã‚ãª neovim ã®æœ€æ–°æƒ…å ±ã‚’çŸ¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

# æœ€å¾Œã«
ã“ã®è¨˜äº‹ã§ã‚„ã£ãŸè¨­å®šã‚’ã‚’ã¾ã¨ã‚ã¦ãŠãã¾ã—ãŸã€‚ã‚³ãƒ¡ãƒ³ãƒˆã¨ã‹ã‚‚æ›¸ãåŠ ãˆã¦ã‚ã‚Šã¾ã™ã€‚init.lua ã«ã“ã‚Œã‚’æ›¸ã„ã¦èµ·å‹•ã™ã‚‹ã ã‘ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚å¤šåˆ†ã€‚
https://github.com/nazo6/zenn/blob/main/examples/c2f16b07798bab/init.lua

ã¤ã„ã§ã«è‡ªåˆ†ã® neovim ã®è¨­å®šã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ç½®ã„ã¦ãŠãã¾ã™ã€‚ã‚ˆã‘ã‚Œã°å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚
https://github.com/nazo6/nvim

ãã‚Œã§ã¯ã‚ˆã„ neovim ãƒ©ã‚¤ãƒ•ã‚’ã€‚

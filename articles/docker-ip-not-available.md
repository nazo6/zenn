---
published: true
type: tech
topics:
  - Docker
emoji: ğŸ‹
title: Dockerã§ã®ã€Œcould not find an available, non-overlapping IPv4 address pool
  among the defaults to assign to the networkã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã®å¯¾å‡¦æ³•
---

è‡ªå®…ã‚µãƒ¼ãƒãƒ¼ã§`docker-compose up`ã‚’ã—ãŸã¨ãã«ã“ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸã€‚ã‚°ã‚°ã£ãŸã¨ã“ã‚`docker network prune`ãªã©ã®è§£æ±ºç­–ãŒå‡ºã¦ãã¾ã—ãŸãŒå®Ÿéš›ã«30å€‹ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã“ã‚Œã§ã¯æ„å‘³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

æ ¹æœ¬ã‹ã‚‰è§£æ±ºã™ã‚‹ã«ã¯ã€1ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚ãŸã‚Šã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å°‘ãªãã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§å¯èƒ½ã§ã™ã€‚ä¾‹ãˆã°ä»¥ä¸‹ã®è¨˜äº‹ã§ã¯ãã®ã‚ˆã†ã«ã‚„ã£ã¦ã„ã¾ã™ã€‚

https://zenn.dev/kobachiki/articles/dc72ce717e3c01

ã§ã™ãŒä»Šå¾Œã®ãŸã‚ã«ä»Šå›ã¯dockerã®è¨­å®šã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯dockerã®`default-address-pools`ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™(å®Ÿéš›ã«æ›¸ã„ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªãæ¦‚å¿µã¨ã—ã¦)ã€‚
```json
  "default-address-pools" : [
    {
      "base" : "172.17.0.0/12",
      "size" : 16
    },
    {
      "base" : "192.168.0.0/16",
      "size" : 20
    }
  ]
```
ã“ã‚Œã¯1ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚ãŸã‚Šæœ€å¤§ã§`/16`ã¨ã„ã†å·¨å¤§é ˜åŸŸã‚’å‰²ã‚Šå½“ã¦ã¦ã„ã¦1ã‚³ãƒ³ãƒ†ãƒŠã«ä½“ã—ã¦ã¯æ˜ã‚‰ã‹ã«ç„¡é§„ã§ã™ã€‚ãªã®ã§
```json
  "default-address-pools" : [
    {
      "base" : "172.17.0.0/12",
      "size" : 20
    },
    {
      "base" : "192.168.0.0/16",
      "size" : 24
    }
  ]
```
ã«ã—ã¦1ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚ãŸã‚Šã®ãƒ›ã‚¹ãƒˆæ•°ã‚’å°‘ãªãã—ã¦ã‚„ã‚Œã°ã‚ˆã‚Šå¤šãã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä½œã‚Œã‚‹ã¨ã„ã†ã‚ã‘ã§ã™ã€‚

ä»¥ä¸‹ã®è¨˜äº‹ã«éå¸¸ã«è©³ã—ãèª¬æ˜ã•ã‚Œã¦ã„ã¦åˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚

https://straz.to/2021-09-08-docker-address-pools/

# synologyã®Container Managerã§ã®è¨­å®šæ–¹æ³•
Synologyã®Container Managerã‚’ä½¿ã£ã¦ã„ã‚‹äººã ã‘ã«é–¢ä¿‚ãŒã‚ã‚‹è©±ã§ã™ã€‚

é€šå¸¸ã§ã‚ã‚Œã°ä»¥ä¸Šã®è¨­å®šã‚’`/etc/docker/daemon.json`ã«åŠ ãˆã‚Œã°ã„ã„ã®ã§ã™ãŒã€Synology NASä¸Šã®dockerã§ã¯
```
/var/packages/ContainerManager/dockerd.json
```
ã«è¨­å®šã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

ã¾ãŸã€ã“ã“ã¯Container Managerã®æ›´æ–°ã§ä¸Šæ›¸ãã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚æ³¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

> ã“ã®è¨˜äº‹ã¯ [https://note.nazo6.dev/blog/docker-ip-not-available](https://note.nazo6.dev/blog/docker-ip-not-available) ã¨ã®ã‚¯ãƒ­ã‚¹ãƒã‚¹ãƒˆã§ã™ã€‚